<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>English Exam – 15 MCQs (9 minutes)</title>
<style>
  body { background:linear-gradient(120deg,#89f7fe,#66a6ff); }
  
  body { font-family: Arial, sans-serif; margin:20px; }
  h1 { text-align:center; color:#111; }
  #timer { position:fixed; top:15px; right:20px; font-size:18px; font-weight:bold; }
  .login, .question, #result { background:#fff; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.2); margin:15px auto; padding:20px; max-width:900px;}
  .options label { display:block; margin:6px 0; padding:8px 10px; border-radius:8px; cursor:pointer; background:#f8f8f8; border:1px solid #e1e1e1; }
  .options input { margin-right:8px; }
  .selected { background:#d0ebff; border-color:#9ad1ff; }
  .correct { color:#15803d; font-weight:bold; }          /* green text */
  .wrong { color:#b91c1c; font-weight:bold; }            /* red text */
  .rightChoice { background:#dcfce7; border-color:#86efac; } /* green bg for correct label */
  .wrongChoice { background:#fee2e2; border-color:#fecaca; } /* red bg for chosen wrong */
  .explanation { font-size:0.95em; color:#333; margin-top:8px; background:#f1f5f9; padding:8px; border-radius:8px; border:1px dashed #cbd5e1; }
  button { padding:10px 18px; margin-top:15px; border:none; border-radius:8px; color:#fff; font-weight:bold; cursor:pointer; }
  button:disabled { opacity:.6; cursor:not-allowed; }
  .btn-primary { background:#0ea5e9; }
  .btn-primary:hover { background:#0284c7; }
  .btn-accent { background:#ef4444; }
  .btn-accent:hover { background:#dc2626; }
  .muted { color:#475569; }

  /* Color accents per subject */
  #timer { color:#111; background:rgba(255,255,255,.75); padding:6px 10px; border-radius:10px; border:1px solid rgba(0,0,0,.08); }
  .login h3 { margin-top:0 }
</style>
</head>
<body>

<h1>English Exam – 15 MCQs (9 minutes)</h1>
<div id="timer">Time: 09:00</div>

<div class="login" id="loginBox">
  <h3>Enter Your Details</h3>
  <label>Name: <input type="text" id="name"></label><br><br>
  <label>User ID: <input type="text" id="userid" placeholder="P222 / N222 / 111M / 333M / 444M / 555M"></label><br><br>
  <button class="btn-primary" onclick="startExam()">Start Exam</button>
  <p class="muted" style="margin-top:8px">Allowed IDs: P222, N222, 111M, 333M, 444M, 555M</p>
</div>

<form id="quizForm" style="display:none;">

  <div class="question" data-answer="A" data-explanation="Write the explanation for this question here.">
    <p>1. Question 1: Write your question text here.</p>
    <div class="options">
      <label><input type="radio" name="q1" value="A"> Option A</label>
      <label><input type="radio" name="q1" value="B"> Option B</label>
      <label><input type="radio" name="q1" value="C"> Option C</label>
      <label><input type="radio" name="q1" value="D"> Option D</label>
    </div>
  </div>
  <div class="question" data-answer="A" data-explanation="Write the explanation for this question here.">
    <p>2. Question 2: Write your question text here.</p>
    <div class="options">
      <label><input type="radio" name="q2" value="A"> Option A</label>
      <label><input type="radio" name="q2" value="B"> Option B</label>
      <label><input type="radio" name="q2" value="C"> Option C</label>
      <label><input type="radio" name="q2" value="D"> Option D</label>
    </div>
  </div>
  <div class="question" data-answer="A" data-explanation="Write the explanation for this question here.">
    <p>3. Question 3: Write your question text here.</p>
    <div class="options">
      <label><input type="radio" name="q3" value="A"> Option A</label>
      <label><input type="radio" name="q3" value="B"> Option B</label>
      <label><input type="radio" name="q3" value="C"> Option C</label>
      <label><input type="radio" name="q3" value="D"> Option D</label>
    </div>
  </div>
  <div class="question" data-answer="A" data-explanation="Write the explanation for this question here.">
    <p>4. Question 4: Write your question text here.</p>
    <div class="options">
      <label><input type="radio" name="q4" value="A"> Option A</label>
      <label><input type="radio" name="q4" value="B"> Option B</label>
      <label><input type="radio" name="q4" value="C"> Option C</label>
      <label><input type="radio" name="q4" value="D"> Option D</label>
    </div>
  </div>
  <div class="question" data-answer="A" data-explanation="Write the explanation for this question here.">
    <p>5. Question 5: Write your question text here.</p>
    <div class="options">
      <label><input type="radio" name="q5" value="A"> Option A</label>
      <label><input type="radio" name="q5" value="B"> Option B</label>
      <label><input type="radio" name="q5" value="C"> Option C</label>
      <label><input type="radio" name="q5" value="D"> Option D</label>
    </div>
  </div>
  <div class="question" data-answer="A" data-explanation="Write the explanation for this question here.">
    <p>6. Question 6: Write your question text here.</p>
    <div class="options">
      <label><input type="radio" name="q6" value="A"> Option A</label>
      <label><input type="radio" name="q6" value="B"> Option B</label>
      <label><input type="radio" name="q6" value="C"> Option C</label>
      <label><input type="radio" name="q6" value="D"> Option D</label>
    </div>
  </div>
  <div class="question" data-answer="A" data-explanation="Write the explanation for this question here.">
    <p>7. Question 7: Write your question text here.</p>
    <div class="options">
      <label><input type="radio" name="q7" value="A"> Option A</label>
      <label><input type="radio" name="q7" value="B"> Option B</label>
      <label><input type="radio" name="q7" value="C"> Option C</label>
      <label><input type="radio" name="q7" value="D"> Option D</label>
    </div>
  </div>
  <div class="question" data-answer="A" data-explanation="Write the explanation for this question here.">
    <p>8. Question 8: Write your question text here.</p>
    <div class="options">
      <label><input type="radio" name="q8" value="A"> Option A</label>
      <label><input type="radio" name="q8" value="B"> Option B</label>
      <label><input type="radio" name="q8" value="C"> Option C</label>
      <label><input type="radio" name="q8" value="D"> Option D</label>
    </div>
  </div>
  <div class="question" data-answer="A" data-explanation="Write the explanation for this question here.">
    <p>9. Question 9: Write your question text here.</p>
    <div class="options">
      <label><input type="radio" name="q9" value="A"> Option A</label>
      <label><input type="radio" name="q9" value="B"> Option B</label>
      <label><input type="radio" name="q9" value="C"> Option C</label>
      <label><input type="radio" name="q9" value="D"> Option D</label>
    </div>
  </div>
  <div class="question" data-answer="A" data-explanation="Write the explanation for this question here.">
    <p>10. Question 10: Write your question text here.</p>
    <div class="options">
      <label><input type="radio" name="q10" value="A"> Option A</label>
      <label><input type="radio" name="q10" value="B"> Option B</label>
      <label><input type="radio" name="q10" value="C"> Option C</label>
      <label><input type="radio" name="q10" value="D"> Option D</label>
    </div>
  </div>
  <div class="question" data-answer="A" data-explanation="Write the explanation for this question here.">
    <p>11. Question 11: Write your question text here.</p>
    <div class="options">
      <label><input type="radio" name="q11" value="A"> Option A</label>
      <label><input type="radio" name="q11" value="B"> Option B</label>
      <label><input type="radio" name="q11" value="C"> Option C</label>
      <label><input type="radio" name="q11" value="D"> Option D</label>
    </div>
  </div>
  <div class="question" data-answer="A" data-explanation="Write the explanation for this question here.">
    <p>12. Question 12: Write your question text here.</p>
    <div class="options">
      <label><input type="radio" name="q12" value="A"> Option A</label>
      <label><input type="radio" name="q12" value="B"> Option B</label>
      <label><input type="radio" name="q12" value="C"> Option C</label>
      <label><input type="radio" name="q12" value="D"> Option D</label>
    </div>
  </div>
  <div class="question" data-answer="A" data-explanation="Write the explanation for this question here.">
    <p>13. Question 13: Write your question text here.</p>
    <div class="options">
      <label><input type="radio" name="q13" value="A"> Option A</label>
      <label><input type="radio" name="q13" value="B"> Option B</label>
      <label><input type="radio" name="q13" value="C"> Option C</label>
      <label><input type="radio" name="q13" value="D"> Option D</label>
    </div>
  </div>
  <div class="question" data-answer="A" data-explanation="Write the explanation for this question here.">
    <p>14. Question 14: Write your question text here.</p>
    <div class="options">
      <label><input type="radio" name="q14" value="A"> Option A</label>
      <label><input type="radio" name="q14" value="B"> Option B</label>
      <label><input type="radio" name="q14" value="C"> Option C</label>
      <label><input type="radio" name="q14" value="D"> Option D</label>
    </div>
  </div>
  <div class="question" data-answer="A" data-explanation="Write the explanation for this question here.">
    <p>15. Question 15: Write your question text here.</p>
    <div class="options">
      <label><input type="radio" name="q15" value="A"> Option A</label>
      <label><input type="radio" name="q15" value="B"> Option B</label>
      <label><input type="radio" name="q15" value="C"> Option C</label>
      <label><input type="radio" name="q15" value="D"> Option D</label>
    </div>
  </div>
  <button type="submit" class="btn-accent">Submit Answers</button>
</form>

<div id="result"></div>

<script>

  const allowedIDs = ["P222","N222","111M","333M","444M","555M"];
  let duration = 540; // seconds
  let subjectKey = "english";
  let timerInterval;

  function startExam(){
    const name=document.getElementById("name").value.trim();
    const userid=document.getElementById("userid").value.trim();
    if(!name){alert("Please enter your name");return;}
    if(!allowedIDs.includes(userid)){alert("Invalid User ID (use P222, N222, 111M, 333M, 444M, 555M)");return;}
    if(localStorage.getItem("submitted_"+subjectKey+"_"+userid)){alert("This User ID has already submitted this subject.");return;}
    // Hide login, show quiz
    document.getElementById("loginBox").style.display="none";
    document.getElementById("quizForm").style.display="block";
    startTimer();
  }

  function startTimer(){
    const timer=document.getElementById("timer");
    timerInterval=setInterval(()=>{
      let m=Math.floor(duration/60), s=duration%60;
      timer.textContent="Time:" + " " + String(m).padStart(2,'0')+":"+String(s).padStart(2,'0');
      if(duration<=0){clearInterval(timerInterval); submitQuiz(true);}
      duration--;
    },1000);
  }

  // Lock answer on first click & mark selected
  document.addEventListener("change",function(e){
    if(e.target && e.target.type==="radio"){
      const qBlock=e.target.closest(".question");
      if(!qBlock) return;
      const radios=qBlock.querySelectorAll("input[type=radio]");
      radios.forEach(r=>r.disabled=true);
      e.target.disabled=false; // keep chosen enabled (but locked to prevent switching)
      // visual mark
      qBlock.querySelectorAll(".options label").forEach(l=>l.classList.remove("selected"));
      e.target.parentElement.classList.add("selected");
    }
  });

  document.getElementById("quizForm").addEventListener("submit", function(e){
    e.preventDefault(); submitQuiz(false);
  });

  function submitQuiz(auto=false){
    clearInterval(timerInterval);
    const userid=document.getElementById("userid").value.trim();
    localStorage.setItem("submitted_"+subjectKey+"_"+userid,true);

    let correct=0,wrong=0,notAnswered=0;
    const questions = document.querySelectorAll(".question");
    questions.forEach(q=>{
      const ans=q.dataset.answer?.trim().toUpperCase();
      const labels = q.querySelectorAll(".options label");
      const selectedInput = q.querySelector("input[type=radio]:checked");
      const selectedVal = selectedInput ? selectedInput.value : null;

      // Mark correctness
      if(!selectedVal){
        notAnswered++;
        q.querySelector("p").classList.add("wrong");
      } else if(selectedVal===ans){
        correct++;
        q.querySelector("p").classList.add("correct");
      } else {
        wrong++;
        q.querySelector("p").classList.add("wrong");
      }

      // Color labels: correct = green; chosen wrong = red
      labels.forEach(lab=>{
        const inp = lab.querySelector("input[type=radio]");
        if(!inp) return;
        const v = inp.value;
        if(v===ans){ lab.classList.add("rightChoice"); }
        if(selectedVal && v===selectedVal && v!==ans){ lab.classList.add("wrongChoice"); }
      });

      // Show explanation
      const exp=document.createElement("div");
      exp.className="explanation";
      const expText = q.dataset.explanation || "";
      exp.textContent = "Correct Answer:" + " " + ans + " | " + expText;
      q.appendChild(exp);
    });

    const total = (correct*1) - (wrong*0.25);
    document.getElementById("result").innerHTML=`
      <h3>"Summary"</h3>
      <p>"Answered": ${correct+wrong}</p>
      <p>"Not Answered": ${notAnswered}</p>
      <p>"Right": ${correct}</p>
      <p>"Wrong": ${wrong}</p>
      <p><b>"Total Marks": ${total}</b></p>
      <button class="btn-primary" id="printAgain" onclick="window.print()">"Print Again"</button>
    `;
    // Auto print
    window.print();
  }

</script>

</body>
</html>
